{% load static  %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Inscription - Noxa</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background: #f3f2ef;
            padding: 25px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .form-control:focus {
            border-color: #764ba2;
            box-shadow: 0 0 8px #764ba2;
        }
        .btn-primary {
            background: #764ba2;
            border: none;
        }
        .btn-primary:hover {
            background: #5a367a;
        }
        .form-label {
            font-weight: 600;
            color: #444;
        }
        .photo-preview {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
            border: 2px solid #764ba2;
            margin-bottom: 15px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .photo-preview:hover {
            transform: scale(1.05);
        }
        .small-text {
            font-size: 0.8rem;
            color: #666;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8 col-sm-10">
            <div class="card p-4 bg-white">
                <h1 class="text-center mb-4" style="color:#764ba2;">Bienvenue sur NOXA</h1> 
               
                <!-- Affichage des messages d'erreur -->

                {% if messages %}
                    <div style="position: fixed; bottom: 20px; right: 20px; z-index: 1050; width: 300px; background: rgba(255, 50, 100, 0.9);">
                        {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show shadow rounded mb-2" role="alert" style="opacity: 0.95; color: white;">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                        {% endfor %}
                    </div>
                {% endif %}



                <h2 class="text-center mb-4" style="color:#764ba2;">Créez un compte</h2>
                <form method="POST" enctype="multipart/form-data" class="needs-validation" >
                    {% csrf_token %}
                    
                    <!-- Photo de profil -->
                    <div class="d-flex flex-column align-items-center">
                        <label for="id_photo" class="form-label">Photo de profil</label>
                        <img src="{% static 'images/avatar.svg' %}" alt="Preview photo" class="photo-preview" id="photoPreview" onclick="document.getElementById('id_photo').click();" />
                        <input type="file" name="photo" id="id_photo" class="form-control d-none" accept="image/*" onchange="previewPhoto(event)" />
                        <small class="small-text">Cliquez sur l'image pour changer la photo</small>
                    </div>

                    <div class="mb-3 mt-3">
                        <label for="id_username" class="form-label">Nom d'utilisateur <span style="color: red;">*</span></label>
                        <input type="text" class="form-control" id="id_username" name="username" required maxlength="25" placeholder="Ton nom d'utilisateur" />
                    </div>

                    <div class="mb-3">
                        <label for="id_email" class="form-label">Adresse email <span style="color: red;">*</span></label>
                        <input type="email" class="form-control" id="id_email" name="email" required placeholder="exemple@gmail.com" />
                    </div>

                    <div class="mb-3">
                        <label for="id_password1" class="form-label">Mot de passe <span style="color: red;">*</span></label>
                        <input type="password" class="form-control" id="id_password1" name="password1" required placeholder="Mot de passe" />
                    </div>

                    <div class="mb-3">
                        <label for="id_password2" class="form-label">Confirmer le mot de passe <span style="color: red;">*</span></label>
                        <input type="password" class="form-control" id="id_password2" name="password2" required placeholder="Confirmez votre mot de passe" />
                    </div>

                    <div class="mb-3">
                        <label for="id_school" class="form-label">École / Université</label>
                        <input type="text" class="form-control" id="id_school" name="school" maxlength="100" placeholder="ENSAE Dakar" />
                    </div>

                    <div class="mb-3">
                        <label for="id_bio" class="form-label">Bio</label>
                        <textarea class="form-control" id="id_bio" name="bio" rows="3" placeholder="Une petite description de vous..."></textarea>
                    </div>

                    <div class="mb-3">
                        <label for="id_linkedin" class="form-label">Profil LinkedIn</label>
                        <input type="url" class="form-control" id="id_linkedin" name="linkedin" placeholder="https://linkedin.com/in/..." />
                    </div>

                    <div class="mb-3">
                        <label for="id_github" class="form-label">Profil GitHub</label>
                        <input type="url" class="form-control" id="id_github" name="github" placeholder="https://github.com/..." />
                    </div>

                    <button type="submit" class="btn btn-primary w-100 py-2">S'inscrire</button>
                    <p class="mt-3 text-center">Déjà un compte ? <a href="{% url 'authentification:login' %}">Connectez-vous</a></p>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function previewPhoto(event) {
        const input = event.target;
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('photoPreview').src = e.target.result;
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
</script>

<!-- Bootstrap JS  -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
